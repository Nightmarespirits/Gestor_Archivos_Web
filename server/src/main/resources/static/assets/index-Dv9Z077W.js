import{aw as A,A as R,r as _,o as B,c as N,w as e,V as z,b as E,d as S,e as t,f as I,g as F,y as u,G as l,h as i,j as L,C as $,aH as P,i as d,E as m,v as j}from"./index-DTzO7a71.js";import{u as q}from"./registro-transferencia-D8l4MZon.js";import{V as H,a as v}from"./VRow-DteDp9R7.js";import{V as K}from"./VSelect-DrkOLv1H.js";import{V as U}from"./VDataTable-BAdSe95_.js";import{V as f}from"./VTooltip-ZPSecc-u.js";import{V as Z}from"./VChip-Bftqh3Dm.js";import"./VTable-Dw3FHTEb.js";import"./filter-C-DwuyMR.js";const h={class:"text-center pa-5"},oe={__name:"index",setup(G){A();const n=q(),V=E(),k=R(()=>n.isLoading()),b=R(()=>n.getRegistrosTransferencia()),c=_({codigo:"",estado:"TODOS",fechaDesde:"",fechaHasta:""}),x=[{title:"N°",key:"numero",sortable:!0,align:"center",width:"80px"},{title:"Código",key:"codigo",sortable:!0},{title:"Fecha",key:"fecha",sortable:!0},{title:"Dependencia Origen",key:"dependenciaOrigen",sortable:!0},{title:"Dependencia Destino",key:"dependenciaDestino",sortable:!0},{title:"Total Documentos",key:"totalDocumentos",sortable:!0,align:"center"},{title:"Responsable",key:"responsable",sortable:!0},{title:"Estado",key:"estado",sortable:!0},{title:"Acciones",key:"actions",sortable:!1,align:"center"}];B(()=>{p()});async function p(){await n.fetchRegistrosTransferencia()}async function g(){await p()}function C(s){V.push({name:"registro-transferencia-detalle",params:{id:s}})}function D(s){V.push({name:"registro-transferencia-edit",params:{id:s}})}async function w(s){confirm("¿Está seguro que desea eliminar este registro de transferencia?")&&await n.deleteRegistroTransferencia(s)&&await p()}async function O(s,a="pdf"){await n.downloadInventario(s,a)}function T(s){switch(s){case"BORRADOR":return"grey";case"FINALIZADO":return"primary";case"APROBADO":return"success";default:return"grey"}}return(s,a)=>(S(),N(z,{fluid:""},{default:e(()=>[t(I,null,{default:e(()=>[t(F,{class:"d-flex justify-space-between align-center"},{default:e(()=>[a[3]||(a[3]=u("span",null,"Registro de Transferencia (Anexo N° 05)",-1)),t(l,{color:"primary","prepend-icon":"mdi-plus",to:{name:"registro-transferencia-create"},class:"ml-2"},{default:e(()=>a[2]||(a[2]=[i(" Nuevo Registro ")])),_:1})]),_:1}),t(L,null,{default:e(()=>[t(H,null,{default:e(()=>[t(v,{cols:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t($,{modelValue:c.value.codigo,"onUpdate:modelValue":a[0]||(a[0]=o=>c.value.codigo=o),label:"Buscar por código","prepend-icon":"mdi-magnify","hide-details":"",variant:"outlined",density:"compact",onKeyup:P(g,["enter"])},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(K,{modelValue:c.value.estado,"onUpdate:modelValue":[a[1]||(a[1]=o=>c.value.estado=o),g],items:["TODOS","BORRADOR","FINALIZADO","APROBADO"],label:"Estado","prepend-icon":"mdi-filter-variant","hide-details":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(l,{color:"primary","prepend-icon":"mdi-refresh",onClick:g,class:"mt-1"},{default:e(()=>a[4]||(a[4]=[i(" Actualizar ")])),_:1})]),_:1})]),_:1}),t(U,{headers:x,items:b.value,loading:k.value,"items-per-page":10,"item-value":"id",class:"elevation-1 mt-4",hover:""},{"item.estado":e(({item:o})=>[t(Z,{color:T(o.estado),"text-color":"white",size:"small"},{default:e(()=>[i(j(o.estado),1)]),_:2},1032,["color"])]),"item.actions":e(({item:o})=>[t(f,{text:"Ver detalles"},{activator:e(({props:r})=>[t(l,m({icon:"",size:"small",color:"info"},r,{onClick:y=>C(o.id)}),{default:e(()=>[t(d,null,{default:e(()=>a[5]||(a[5]=[i("mdi-eye")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024),t(f,{text:"Editar"},{activator:e(({props:r})=>[t(l,m({icon:"",size:"small",color:"warning"},r,{class:"ml-2",onClick:y=>D(o.id)}),{default:e(()=>[t(d,null,{default:e(()=>a[6]||(a[6]=[i("mdi-pencil")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024),t(f,{text:"Descargar"},{activator:e(({props:r})=>[t(l,m({icon:"",size:"small",color:"success"},r,{class:"ml-2",onClick:y=>O(o.id,"pdf")}),{default:e(()=>[t(d,null,{default:e(()=>a[7]||(a[7]=[i("mdi-download")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024),t(f,{text:"Eliminar"},{activator:e(({props:r})=>[t(l,m({icon:"",size:"small",color:"error"},r,{class:"ml-2",onClick:y=>w(o.id)}),{default:e(()=>[t(d,null,{default:e(()=>a[8]||(a[8]=[i("mdi-delete")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024)]),"no-data":e(()=>[u("div",h,[t(d,{size:"large",icon:"mdi-file-document-outline",color:"grey"}),a[9]||(a[9]=u("div",{class:"text-body-1 mt-2"},"No se encontraron registros de transferencia",-1)),a[10]||(a[10]=u("div",{class:"text-body-2 mt-1 grey--text"}," Los registros de transferencia aparecerán aquí una vez creados ",-1))])]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1}))}};export{oe as default};
