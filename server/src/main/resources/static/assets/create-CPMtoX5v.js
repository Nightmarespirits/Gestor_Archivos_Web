import{aw as q,A as R,r as s,c as x,w as l,V as C,b as w,d as y,e as r,f as O,g as S,y as v,G as d,h as u,j as T,aq as U,C as i}from"./index-DTzO7a71.js";import{u as N}from"./registro-transferencia-D8l4MZon.js";import{V as A}from"./VForm-Cr0IhdhJ.js";import{V as B,a as t}from"./VRow-DteDp9R7.js";import{V}from"./VSelect-DrkOLv1H.js";import{V as F}from"./VTextarea-BbRLHrOO.js";import"./VChip-Bftqh3Dm.js";const _={class:"d-flex flex-column flex-sm-row gap-2 mt-5"},H={__name:"create",setup(k){const g=w(),m=N(),b=q(),f=R(()=>m.isLoading()),p=s(null),c=s([{id:1,nombre:"Dirección General"},{id:2,nombre:"Departamento de Archivo"},{id:3,nombre:"Departamento de Logística"},{id:4,nombre:"Departamento de Administración"}]),o=s({codigo:"",numero:"",fecha:new Date().toISOString().substr(0,10),dependenciaOrigen:null,dependenciaDestino:null,responsable:b.getUserFullName()||"",totalDocumentos:0,observaciones:"",estado:"BORRADOR"});async function D(){if(p.value.validate())try{const n=await m.createRegistroTransferencia(o.value);n&&n.id&&(alert("Registro de transferencia creado con éxito"),g.push({name:"registro-transferencia-list"}))}catch(n){console.error("Error al guardar el registro:",n),alert("Error al guardar el registro: "+n.message)}}return(n,a)=>(y(),x(C,{fluid:""},{default:l(()=>[r(O,null,{default:l(()=>[r(S,{class:"d-flex justify-space-between"},{default:l(()=>[a[8]||(a[8]=v("span",null,"Crear Registro de Transferencia",-1)),r(d,{color:"error",variant:"outlined","prepend-icon":"mdi-arrow-left",to:{name:"registro-transferencia-list"},class:"ml-2"},{default:l(()=>a[7]||(a[7]=[u(" Cancelar ")])),_:1})]),_:1}),r(T,null,{default:l(()=>[r(A,{ref_key:"form",ref:p,onSubmit:U(D,["prevent"])},{default:l(()=>[r(B,null,{default:l(()=>[r(t,{cols:"12",md:"6"},{default:l(()=>[r(i,{modelValue:o.value.codigo,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.codigo=e),label:"Código",rules:[e=>!!e||"Código es requerido"],required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12",md:"6"},{default:l(()=>[r(i,{modelValue:o.value.numero,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.numero=e),label:"Número",rules:[e=>!!e||"Número es requerido"],required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12",md:"6"},{default:l(()=>[r(i,{modelValue:o.value.fecha,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.fecha=e),label:"Fecha",type:"date",rules:[e=>!!e||"Fecha es requerida"],required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12",md:"6"},{default:l(()=>[r(V,{modelValue:o.value.dependenciaOrigen,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.dependenciaOrigen=e),items:c.value,label:"Dependencia Origen","item-title":"nombre","item-value":"id",rules:[e=>!!e||"Dependencia origen es requerida"],required:"",variant:"outlined"},null,8,["modelValue","items","rules"])]),_:1}),r(t,{cols:"12",md:"6"},{default:l(()=>[r(V,{modelValue:o.value.dependenciaDestino,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value.dependenciaDestino=e),items:c.value,label:"Dependencia Destino","item-title":"nombre","item-value":"id",rules:[e=>!!e||"Dependencia destino es requerida"],required:"",variant:"outlined"},null,8,["modelValue","items","rules"])]),_:1}),r(t,{cols:"12",md:"6"},{default:l(()=>[r(i,{modelValue:o.value.responsable,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value.responsable=e),label:"Responsable",rules:[e=>!!e||"Responsable es requerido"],required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12"},{default:l(()=>[r(F,{modelValue:o.value.observaciones,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value.observaciones=e),label:"Observaciones",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),v("div",_,[r(d,{color:"primary",type:"submit",size:"large",loading:f.value,"prepend-icon":"mdi-content-save"},{default:l(()=>a[9]||(a[9]=[u(" Guardar Registro ")])),_:1},8,["loading"]),r(d,{color:"secondary",variant:"outlined",size:"large",loading:f.value,to:{name:"registro-transferencia-list"}},{default:l(()=>a[10]||(a[10]=[u(" Cancelar ")])),_:1},8,["loading"])])]),_:1},512)]),_:1})]),_:1})]),_:1}))}};export{H as default};
