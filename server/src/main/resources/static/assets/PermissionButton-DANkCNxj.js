import{a as k,aw as v,A as o,o as q,k as B,p as u,d as c,bd as S,c as p,w as f,e as I,G as b,be as C,i as R,h as D,v as N}from"./index-DTzO7a71.js";const z={key:0},x={__name:"PermissionWrapper",props:{permissions:{type:[String,Array],default:()=>[]},requireAllPermissions:{type:[String,Array],default:()=>[]},roles:{type:[String,Array],default:()=>[]}},setup(e){const s=e,t=k(),a=v(),i=o(()=>{if(!s.permissions.length)return!0;const r=Array.isArray(s.permissions)?s.permissions:[s.permissions];return t.hasAnyPermission(r)}),m=o(()=>{if(!s.requireAllPermissions.length)return!0;const r=Array.isArray(s.requireAllPermissions)?s.requireAllPermissions:[s.requireAllPermissions];return t.hasAllPermissions(r)}),g=o(()=>{var d,y,A;if(!s.roles.length)return!0;const r=Array.isArray(s.roles)?s.roles:[s.roles],n=((A=(y=(d=a.user)==null?void 0:d.role)==null?void 0:y.name)==null?void 0:A.toUpperCase())||"";return r.some(P=>{const l=P.toUpperCase();return n===l||l==="ADMIN"&&n==="ADMINISTRADOR"||l==="ADMINISTRADOR"&&n==="ADMIN"})}),h=o(()=>i.value&&m.value&&g.value);return q(()=>{t.loadUserPermissions()}),(r,n)=>h.value?(c(),B("div",z,[S(r.$slots,"default")])):u("",!0)}},V={__name:"PermissionButton",props:{permissions:{type:[String,Array],default:()=>[]},requireAllPermissions:{type:[String,Array],default:()=>[]},roles:{type:[String,Array],default:()=>[]},text:{type:String,default:""},color:{type:String,default:"primary"},variant:{type:String,default:"elevated"},size:{type:String,default:"default"},prependIcon:{type:String,default:null},iconButton:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},buttonClass:{type:String,default:""},type:{type:String,default:"button"}},emits:["click"],setup(e,{emit:s}){const t=s,a=i=>{t("click",i)};return(i,m)=>(c(),p(x,{permissions:e.permissions,roles:e.roles,requireAllPermissions:e.requireAllPermissions},{default:f(()=>[I(b,{color:e.color,variant:e.variant,size:e.size,disabled:e.disabled,class:C(e.buttonClass),icon:e.iconButton,type:e.type,onClick:a},{default:f(()=>[e.prependIcon?(c(),p(R,{key:0,icon:e.prependIcon,class:"mr-1"},null,8,["icon"])):u("",!0),e.iconButton?u("",!0):S(i.$slots,"default",{key:1},()=>[D(N(e.text),1)])]),_:3},8,["color","variant","size","disabled","class","icon","type"])]),_:3},8,["permissions","roles","requireAllPermissions"]))}};export{V as _};
