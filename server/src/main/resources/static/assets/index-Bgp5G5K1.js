import{aw as O,A as b,r as U,o as D,c as R,w as o,V as M,b as $,d as h,e as a,f as F,g as G,y as m,G as s,h as n,j as K,C as x,aH as k,i as c,E as f,v as j,bw as q}from"./index-DTzO7a71.js";import{u as I}from"./catalogo-transferencia-D9ScGTOQ.js";import{V as P,a as g}from"./VRow-DteDp9R7.js";import{V as H}from"./VSelect-DrkOLv1H.js";import{V as J}from"./VDataTable-BAdSe95_.js";import{V as p}from"./VTooltip-ZPSecc-u.js";import{V as Q}from"./VChip-Bftqh3Dm.js";import"./VTable-Dw3FHTEb.js";import"./filter-C-DwuyMR.js";const W={class:"text-center pa-5"},ie={__name:"index",setup(X){O();const d=I(),V=$(),{showSuccess:w,showError:C,showConfirm:E}=q(),T=b(()=>d.isLoading()),N=b(()=>d.getCatalogosTransferencia()),i=U({codigo:"",titulo:"",estadoConservacion:"TODOS"}),_=[{title:"N°",key:"id",sortable:!0,align:"center",width:"80px"},{title:"Código",key:"codigoReferencia",sortable:!0},{title:"Título",key:"serieDocumental",sortable:!0},{title:"Lugar y Fecha",key:"lugarFechaElaboracion",sortable:!0},{title:"Volumen (M)",key:"volumenMetrosLineales",sortable:!0,align:"center"},{title:"Soporte",key:"soporte",sortable:!0},{title:"Elaborado por",key:"inventarioElaboradoPor",sortable:!0},{title:"Acciones",key:"actions",sortable:!1,align:"center"}];D(()=>{v()});async function v(){await d.fetchCatalogosTransferencia()}async function u(){await v()}function A(r){V.push({name:"catalogo-transferencia-detalle",params:{id:r}})}function S(r){V.push({name:"catalogo-transferencia-edit",params:{id:r}})}async function z(r){if(await E({title:"Confirmar eliminación",message:"¿Está seguro que desea eliminar este catálogo de transferencia?",confirmText:"Eliminar",cancelText:"Cancelar",confirmColor:"error"}))try{await d.deleteCatalogoTransferencia(r)?(w("Catálogo de transferencia eliminado correctamente"),await v()):C("No se pudo eliminar el catálogo de transferencia")}catch(t){console.error("Error al eliminar catálogo:",t),C("Error al eliminar el catálogo de transferencia: "+t.message)}}async function B(r,e="pdf"){try{await d.downloadInventario(r,e),w(`Catálogo descargado correctamente en formato ${e.toUpperCase()}`)}catch(t){console.error("Error al descargar catálogo:",t),C("Error al descargar el catálogo: "+t.message)}}function L(r){switch(r){case"BUENO":return"success";case"REGULAR":return"warning";case"MALO":return"error";default:return"grey"}}return(r,e)=>(h(),R(M,{fluid:""},{default:o(()=>[a(F,null,{default:o(()=>[a(G,{class:"d-flex justify-space-between align-center"},{default:o(()=>[e[4]||(e[4]=m("span",null,"Catálogo de Transferencia (Anexo N° 06)",-1)),a(s,{color:"primary","prepend-icon":"mdi-plus",to:{name:"catalogo-transferencia-create"},class:"ml-2"},{default:o(()=>e[3]||(e[3]=[n(" Nuevo Catálogo ")])),_:1})]),_:1}),a(K,null,{default:o(()=>[a(P,null,{default:o(()=>[a(g,{cols:"12",sm:"6",md:"4",lg:"3"},{default:o(()=>[a(x,{modelValue:i.value.titulo,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.titulo=t),label:"Buscar por título","prepend-icon":"mdi-magnify","hide-details":"",variant:"outlined",density:"compact",onKeyup:k(u,["enter"])},null,8,["modelValue"])]),_:1}),a(g,{cols:"12",sm:"6",md:"4",lg:"3"},{default:o(()=>[a(x,{modelValue:i.value.codigo,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.codigo=t),label:"Buscar por código","prepend-icon":"mdi-barcode","hide-details":"",variant:"outlined",density:"compact",onKeyup:k(u,["enter"])},null,8,["modelValue"])]),_:1}),a(g,{cols:"12",sm:"6",md:"4",lg:"3"},{default:o(()=>[a(H,{modelValue:i.value.estadoConservacion,"onUpdate:modelValue":[e[2]||(e[2]=t=>i.value.estadoConservacion=t),u],items:["TODOS","BUENO","REGULAR","MALO"],label:"Estado de Conservación","prepend-icon":"mdi-filter-variant","hide-details":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),a(g,{cols:"12",sm:"6",md:"4",lg:"3"},{default:o(()=>[a(s,{color:"primary","prepend-icon":"mdi-refresh",onClick:u,class:"mt-1"},{default:o(()=>e[5]||(e[5]=[n(" Actualizar ")])),_:1})]),_:1})]),_:1}),a(J,{headers:_,items:N.value,loading:T.value,"items-per-page":10,"item-value":"id",class:"elevation-1 mt-4",hover:""},{"item.estadoConservacion":o(({item:t})=>[a(Q,{color:L(t.estadoConservacion),"text-color":"white",size:"small"},{default:o(()=>[n(j(t.estadoConservacion),1)]),_:2},1032,["color"])]),"item.actions":o(({item:t})=>[a(p,{text:"Ver detalles"},{activator:o(({props:l})=>[a(s,f({icon:"",size:"small",color:"info"},l,{onClick:y=>A(t.id)}),{default:o(()=>[a(c,null,{default:o(()=>e[6]||(e[6]=[n("mdi-eye")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024),a(p,{text:"Editar"},{activator:o(({props:l})=>[a(s,f({icon:"",size:"small",color:"warning"},l,{class:"ml-2",onClick:y=>S(t.id)}),{default:o(()=>[a(c,null,{default:o(()=>e[7]||(e[7]=[n("mdi-pencil")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024),a(p,{text:"Descargar"},{activator:o(({props:l})=>[a(s,f({icon:"",size:"small",color:"success"},l,{class:"ml-2",onClick:y=>B(t.id,"pdf")}),{default:o(()=>[a(c,null,{default:o(()=>e[8]||(e[8]=[n("mdi-download")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024),a(p,{text:"Eliminar"},{activator:o(({props:l})=>[a(s,f({icon:"",size:"small",color:"error"},l,{class:"ml-2",onClick:y=>z(t.id)}),{default:o(()=>[a(c,null,{default:o(()=>e[9]||(e[9]=[n("mdi-delete")])),_:1})]),_:2},1040,["onClick"])]),_:2},1024)]),"no-data":o(()=>[m("div",W,[a(c,{size:"large",icon:"mdi-folder-outline",color:"grey"}),e[10]||(e[10]=m("div",{class:"text-body-1 mt-2"},"No se encontraron catálogos de transferencia",-1)),e[11]||(e[11]=m("div",{class:"text-body-2 mt-1 grey--text"}," Los catálogos de transferencia aparecerán aquí una vez creados ",-1))])]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1}))}};export{ie as default};
